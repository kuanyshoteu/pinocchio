{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block head_extra %} 
	{{ form.media }}
{% endblock head_extra %}
{% load staticfiles %}

{% block content %}
<style type="text/css">
	.ten.wide.column{
		padding-bottom: 0 !important;
	}
	.six.wide.column{
		padding-bottom: 0 !important;
	}
	.form-group{
		width: 46%;
		display: inline-block;
		position: flex;
		margin-right: 2%;
	}
	.textinput, .numberinput, .clearablefileinput, .change_subject_category,.change_subject_age{
		margin: -10px 0 0 !important;
	}
	#div_id_title{
		width: 64%;
	}
	#div_id_content{
		width: 100% !important;
	}
	#div_id_cost{
		margin-left: 2%;
		margin-right: 0;
		width: 30%;
	}
</style>
<div id="profile" style="padding-bottom: 200px;">
	{% if instance %}
	<a id="go-back-btn"  href='{{ instance.get_absolute_url }}'>
        <i class="check icon" style="color: #5181b8"></i>
    </a>
	{% else %}
	<a id="go-back-btn" style="width: 100px;font-size: 13px;right: 30%;" href='{% url "subjects:list" %}'>
        <i class="arrow left icon" style="color: #5181b8;"></i>Назад
    </a>
    {% endif %}
	<div class='ui container'>
		<div class="ui grid stackable">
            {% include 'left_menu.html' %}
            <div class="wide column" style="width: 80%;">
            	<form class="ui form" method='POST' action='' enctype='multipart/form-data'>{% csrf_token %}
	            	<div class="ui grid stackable">
			            <div class="eight wide column" style="padding-right: 0">
			            	<div class="ui segment" style="margin-bottom: 0;background: #fafbfc;height: 54px;padding: 0 20px;line-height: 54px;font-size: 15px;">
				        		Основная информация <a href="{{ instance.get_absolute_url }}"><b>{{ instance.title }}</b></a>
				        	</div>
				        	<div class="ui segment" style="line-height: 40px; margin-top: 0;padding-bottom: 31px;">
			        			<div class="ui grid">
			        				<div class="sixteen wide column" style="font-weight: 600;">
			        					{{ form|crispy }}
			        					{% if instance %}
			        						<br>
				        					Предмет курса
			                                <select class="change_subject_category" id="change_subject_category" url="{{ instance.change_category }}" option="subject"> 
			                                	{% if instance.category == None %}
			                                		<option value="-1">Другое</option>
	                                            {% elif instance.category %}
	                                                <option value="{{ instance.age.id }}">{{ instance.category.title }}</option>
	                                            {% endif %}
			                                    {% for subject_category in subject_categories %}
			                                        {% if subject_category != instance.category %}
			                                        <option value="{{ subject_category.id }}">{{ subject_category.title }}</option>
			                                        {% endif %}
			                                    {% endfor %}
	                                            {% if instance.category != None %}
			                                    <option value="-1">Другое</option>
			                                    {% endif %}
			                                </select>
				        					Возраст
			                                <select class="change_subject_age" id="change_subject_age" url="{{ instance.change_age }}" option="subject">
			                                	{% if instance.age == None %}
			                                		<option value="-1">Другое</option>
	                                            {% elif instance.age %}
	                                                <option value="{{ instance.age.id }}">{{ instance.age.title }}</option>
	                                            {% endif %}
	                                            {% for subject_age in subject_ages %}
	                                                {% if subject_age != instance.age %}
	                                                <option value="{{ subject_age.id }}">{{ subject_age.title }}</option>
	                                                {% endif %}
	                                            {% endfor %}
	                                            {% if instance.age != None %}
	                                            <option value="-1">Другое</option>
	                                            {% endif %}
	                                        </select>
				                        {% endif %}                                        
			        				</div>
			        			</div>
							</div>
						</div>
						{% if instance %}
						<div class="eight wide column">
							<div class="ui segment" style="margin-bottom: 0;background: #fafbfc;height: 54px;padding: 0 20px; line-height: 54px;font-size: 15px;font-family: Tahoma, sans-serif;">
				        		Детальная информация <a href="{{ instance.get_absolute_url }}"><b>{{ instance.title }}</b></a>
				        	</div>
							<div class="ui segment" style="line-height: 40px;margin-top: 0;height: 297px;">
								<div class="ui grid">
									<div class="sixteen wide column">
										{{ form2|crispy }}
									</div>
									<div class="six wide column" style="padding-right: 0;text-align: right;">
			        					Количество уроков:
									</div>
									<div class="ten wide column">
									    <input type="number" name="number_of_materials" value="{{instance.number_of_materials}}">
									</div>
									<div class="sixteen wide column">
			                            <a href="{{ instance.get_delete_url }}" class="ui button red small">
	                                        <i class="icon trash" style="color: #fff;"></i> Удалить предмет "<b>{{ instance.title }}</b>"
			                            </a>
		                            </div>											
								</div>
			    			</div>
						</div>
						<div class="sixteen wide column" style="padding: 0 14px;">
			    			{% include 'subjects/subject_calendar.html' %}
						</div>
						{% endif %}	
						{% if instance %}
						<div class="sixteen wide column" style="padding-top: 0;padding-right: 0">
	        				<div class="ui segment" style="text-align: center;">
								<input type='submit' class='ui button blue tiny' value='Сохранить' />
							</div>
						</div>
						{% else %}
							<div class="one wide column"></div>
							<div class="{% if instance %}sixteen{%else%}eight{% endif %} wide column" style="padding-top: 0;padding-right: 0">
		        				<div class="ui segment" style="text-align: center;">
									<input type='submit' class='ui button blue tiny' value='Создать предмет' />
								</div>
							</div>
						{% endif %}
					</div>
				</form>
			</div>
		</div>
	</div>	
	<span id='{{ instance.id }}' data-href='{{ instance.calendar_url }}' style="display: none;" name='data' class="data" days='' >
	</span>
</div>

{% endblock content %}