{% load tttags %}
{% load staticfiles %}
<style type="text/css">
    .icon.angle:before{
        font-size: 20px;
    }
</style>
<span style="display: none;" class="instance_id" id="{{ instance.id }}"></span>
<div class="ui segment" style="margin-bottom: 0;margin-top: 0">
    <div class="ui grid">
        <div class="one wide column" style="margin-right: 16px;">
                <img src="{% static 'images/calendar.png' %}" style="width: 28px;border-radius: 3px;">  
        </div>
        <div class="twelve wide column" style="padding-left: 0;line-height: 28px;font-size: 15px;">
            Расписание 
            {% if is_trener or is_manager %}
            <a class="ml15" href="{{ instance.get_update_url }}"><span style="font-size: 13px;">Изменить</span></a>
            {% endif %}
        </div>
    </div>
</div>
{% load ttags %}
<span style="display: none;" class="instance_id" id="{{ instance.id }}"></span>
<span style="display: none;" class="change_schedule_url" url="{{ instance.change_schedule_url }}"></span>
<div id="calendar" length='7'>
    {% if is_manager %}
    {% if time_periods|length == 0 %}
    <div style="background-color:#4a4a4a;color:#fff;padding:15px;">Не настроены времена уроков, можете настроить в <a href="/schools/info/" class="ui button mini green">Управлении</a></div>
    {% endif %}
    {% endif %}
    {% if time_periods|length > 0 %}
    <div id="week">   
        <div class="week" id="0">
            <div class="daysmall daysmall_time" style="padding-top: 17px;">
            </div>
            {% for day in days %}
            <div class="daysmall">
                <div class="day-name">
                    {{ day.title }}
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="ui divider" style="margin: 0; padding: 2px;background-color:#4A4A4A "></div>
        {% for timep in time_periods %}
        <div class="week" id="{{ forloop.counter }}">
            <div class="daysmall daysmall_time" style="padding-top: 17px;">
                {{ timep.start }}-{{ timep.end }}
            </div>
            {% for cell in timep.time_cell.all %}  
            <div class="daysmall other" style="padding: 0">                                     
                <div>
                    {% for lecture in cell|cell_squad_lectures:instance %}
                        <div class="ui segment in_schedule" squad_id='{{ lecture.squad.id }}' id="s{{ lecture.squad.id }}c{{ cell.id }}" old_cell="{{ cell.id }}" {% if page == 'subject_update' %} draggable="true" {% endif %} ondragstart="drag(event)" style="padding: 0px;margin-bottom: 3px; margin-top: 0px;cursor: pointer;background-color:#5181b8;">
                            {{ lecture.subject.title }}
                            {% if cell|cell_squad_lectures:instance|length == 1 %}
                            <br>
                            <span style="color: rgba(255, 255, 255, .5);font-size: 11px">{{ instance.cabinet }}</span>
                            <br>
                            <span style="color: rgba(255, 255, 255, .5);font-size: 11px">{{ instance.teacher.first.first_name }}</span>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="ui divider" style="margin: 0; padding: 2px;background-color:#4A4A4A "></div>
        {% endfor %}
    </div>
    {% endif %}
</div>   
