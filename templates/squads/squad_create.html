{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block head_extra %} 
	{{ form.media }}
{% endblock head_extra %}
{% load staticfiles %}

{% block content %}
<style type="text/css">
	.ten.wide.column{
		padding-bottom: 0 !important;
	}
	.six.wide.column{
		padding-bottom: 0 !important;
	}
	.form-group{
		width: 46%;
		display: inline-block;
		position: flex;
		margin-right: 2%;
	}
	#div_id_title{
		width: 64%;
	}
	#div_id_content{
		width: 100% !important;
	}
	#div_id_slogan{
		margin-left: 2%;
		margin-right: 0;
		width: 30%;
	}
</style>

<div id="group-create">
	{% if instance %}
	<span class="add_student_url" id="{{instance.id}}" style="display: none;" url="{{ instance.add_student_url }}"></span>
	<a id="go-back-btn-before"  href='{{ instance.get_absolute_url }}'>
        <i class="arrow left icon"></i>
    </a>
	{% else %}
	<a id="go-back-btn-before" href='{% url "squads:list" %}'>
        <i class="arrow left icon"></i>
    </a>
    {% endif %}
	<div class='ui container'>
		<div class="ui grid stackable">
            {% include 'left_menu.html' %}
            <div class="wide column" style="width: 80%;margin-left: 30px;">
            	<form class="ui form" method='POST' action='' enctype='multipart/form-data'>{% csrf_token %}  
	            	<div class="ui grid stackable">
	            		<div class="nine wide column" style="padding-right: 0;padding-bottom: 0">
		    				<div class="ui segment" style="margin-bottom: 0;background: #fafbfc;height: 54px;padding: 0 20px;line-height: 54px;font-size: 15px;">
				        		Основная информация <a href="{{ instance.get_absolute_url }}"><b>{{ instance.title }}</b></a>
				        	</div>
				        	<div class="ui segment" style="margin-top: 0;height: 297px;">
				        		<div class="ui grid">
				        			<div class="sixteen wide column">
			        					{{ form|crispy }}
			        					{% if instance %}
				        					<br>
				        					Учитель:
											<select id="change_teacher" class="change_teacher" squad_id="{{ instance.id }}" url="{{ instance.change_curator_url }}" name="change_teacher">
												<option value="{{ instance.teacher.id }}">{{ instance.teacher.first_name }}</option>
												{% for teacher in all_teachers %}
													{% if teacher != instance.teacher %}
														<option value="{{ teacher.id }}">{{ teacher.first_name }}</option>
													{% endif %}
												{% endfor %}
											</select>
						    			{% endif %}
			        				</div>
									<div class="eight wide column" style="padding-top: 0">
										<p style="font-size: 13px;padding-top: 2px;">
				        					Выберите дату <b>начала</b> курса:
				        				</p>
										<input type="date" url="{{ instance.change_start_url }}" squad_id="{{ instance.id }}" name='start' class="start" style="width: 200px;" value="{{ instance.start_date|date:'Y-m-d'}}"> 
				    					<div class="ui mini modal ws">
    										<i class="close icon"></i>
										    <div class="content">
				    							Начало курса не может быть позднее конца, выберите другую дату
				    						</div>
				    					</div>
									</div>
									<div class="eight wide column" style="padding-top: 0">
										<p style="font-size: 13px;padding-top: 2px;">
				        					Выберите дату <b>окончания</b> курса:
				        				</p>
										<input type="date" url="{{ instance.change_end_url }}" squad_id="{{ instance.id }}" name='end' class="end" style="width: 200px;" value="{{ instance.end_date|date:'Y-m-d'}}">
				    					<div class="ui mini modal we">
    										<i class="close icon"></i>
										    <div class="content">
				    							Конец курса не может быть раньше начала, выберите другую дату
				    						</div>
				    					</div>				        				
									</div>
			        			</div>
			        		</div>
			        	</div>
						{% if not instance %}
						<div class="nine wide column" style="padding-right: 0;text-align: center;">
							<div class="ui segment">
					    		<input type='submit' style="margin-top: 1rem;height: 30px;" class='ui button blue tiny' value='Продолжить создание класса' />								
							</div>
			    		</div>
			        	{% else %}
						<div class="seven wide column" style="padding-bottom: 0;padding-left: 0">
							<div class="ui segment" style="margin-bottom: 0;background: #fafbfc;height: 54px;padding: 0 20px; line-height: 54px;font-size: 15px;font-family: Tahoma, sans-serif;">
				        		Детальная информация <a href="{{ instance.get_absolute_url }}"><b>{{ instance.title }}</b></a>
				        	</div>
							<div class="ui segment" style="line-height: 40px;margin-top: 0;height: 297px;">
								<div class="ui grid">
									<div class="sixteen wide column">
                                        <input type="file" name="squad_banner" id="squad_banner" class="postfile">
                                        <label class="file_post" for="squad_banner">
                                            <a class="ui button mini"><i class="icon image blue"></i>Баннер</a>
                                        </label>
                                        <input type="file" name="squad_icon" id="squad_icon" class="postfile">
                                        <label class="file_post" for="squad_icon">
                                            <a class="ui button mini"><i class="icon image blue"></i>Иконка</a>
                                        </label>
									</div>
                                    <div class="seven wide column">
                                        Цвет:
                                        <textarea name="color_back" class="no_margin" style="width:100px;">{{ instance.color_back }}</textarea>
                                    </div>
                                    <div class="sixteen wide column" style="padding-top: 0">
                                        <b>Офис:</b>
                                        <select class="change_squad_office" id="change_squad_office" url="{{ instance.change_office }}" option="office" style="margin-top: -10px;">
                                            {% if instance.office == None %}
                                                <option value="-1">Другое</option>
                                            {% elif instance.office %}
                                                <option value="{{ instance.office.id }}">{{ instance.office.title }}</option>
                                            {% endif %}
                                            {% for office in offices %}
                                                {% if office != instance.office %}
                                                <option value="{{ office.id }}">{{ office.title }}</option>
                                                {% endif %}
                                            {% endfor %}
                                            {% if instance.office != None %}
                                                <option value="-1">Другое</option>
                                            {% endif %}
                                        </select>                                       
                                    </div>
									<div class="sixteen wide column">
			                            <a href="{{ instance.get_delete_url }}" class="ui button red small">
	                                        <i class="icon trash" style="color: #fff;"></i> Удалить группу "<b>{{ instance.title }}</b>"
			                            </a>
		                            </div>	
								</div>
							</div>
						</div>
	        			<div class="sixteen wide column" style="text-align: center;padding-top: 0">
	        				<div class="ui segment">
								<input type='submit' class='ui button blue tiny' value='Сохранить' />
	        				</div>
        				</div>
        				<div class="sixteen wide column">
		    				<div class="ui segment" style="margin-bottom: 0;background: #fafbfc;height: 54px;padding: 0 20px;line-height: 54px;font-size: 15px;f">
				        		Студенты <a href="{{ instance.get_absolute_url }}"><b>{{ instance.title }}</b></a>
				        	</div>
				        	<div class="ui segment" style="margin-top: 0;background-color: #4a4a4a;color: #fff;padding-top: 15px;">
				        		<div class="ui grid stackable" style="margin-top: 0">
									{% for student in squad_students %}
									<div class="five wide column" style="padding:5px;">
										<div class="test_variant_chosed" style="">
			        						{% if student.image %}
			                                    <img class="ui avatar image" src="{{ student.image.url }}" style="width: 30px; height: 30px;">
			                                {% else %}
			                                    <img class="ui avatar image" style="width: 30px; height: 30px;" src="{% static 'images/nophoto.png' %}">
			                                {% endif %}
				                            <div style="width: 70%;" class="student_name2">
				                            	{{ student.first_name }}
				                            </div>
			                            	<i id="studenticon{{ student.id }}" class="icon check circle green"></i> 
				                            <a class="ui button mini blue add_student" id="{{ student.id }}" style="float: right;padding: 2px 10px;height: 23px;">-</a>
										</div>
				                    </div>
									{% endfor %}

									<div class="sixteen wide column" style="padding: 10px;"></div>
									{% for student in all_students %}
									<div class="five wide column" style="padding:5px;">
										<div class="test_variant2">
			        						{% if student.image %}
			                                    <img class="ui avatar image" src="{{ student.image.url }}" style="width: 30px; height: 30px;">
			                                {% else %}
			                                    <img class="ui avatar image" style="width: 30px; height: 30px;" src="{% static 'images/nophoto.png' %}">
			                                {% endif %}
				                            <span style="width:70%;" class="student_name2">
				                            	{{ student.first_name }}
				                            </span>
			                            	<i style="display: none;" id="studenticon{{ student.id }}" class="icon check circle green"></i> 
				                            <a class="ui button mini blue add_student" id="{{ student.id }}" style="float: right;padding: 6px 10px;height: 23px;">+</a>
				                        </div>
				                    </div>
		                            {% endfor %}
			        				<div class="sixteen wide column" style="margin: 0;padding: 0">
				        				<div class="ui divider" style="margin: 0"></div>
				        			</div>
			        				<div class="sixteen wide column" style="margin: 0;text-align: center;">
			        					<input type='submit' class='ui button blue tiny' value='Сохранить' />
				        			</div>
			        			</div>
			        		</div>
			        	</div>
		        		{% endif %}
	        		</div>
	    		</form>
			</div>
		</div>
	</div>	
</div>

{% endblock content %}